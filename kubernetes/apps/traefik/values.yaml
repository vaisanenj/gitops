traefik:
  deployment:
    additionalVolumes:
    - name: plugins
  additionalVolumeMounts:
  - name: plugins
    mountPath: /plugins-storage
  additionalArguments:
  - "--api"
  - "--api.dashboard=true"
  - "--api.insecure=true"
  - "--experimental.plugins.blockpath.moduleName=github.com/traefik/plugin-blockpath"
  - "--experimental.plugins.blockpath.version=v0.2.1"

  ports:
    web:
      expose:
        default: true
    websecure:
      expose:
        default: true
    local-web:
      port: 80
      expose:
        default: false
        internal: true
      exposedPort: 80
    local-https:
      port: 443
      expose:
        default: false
        internal: true
      exposedPort: 443

  ingressRoute:
    dashboard:
      enabled: true
      matchRule: Host(`homelab.local`) && (PathPrefix(`/dashboard`)
      entryPoints: ['local-https']

  service:
    additionalServices:
      internal:
        type: LoadBalancer
        labels:
          traefik-service-label: internal